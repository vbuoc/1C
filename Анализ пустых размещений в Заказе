Если Ссылка.Пустая() Тогда
  Сообщить("Необходимо записать документ!");
  Возврат;
КонецЕсли;

//+1Ctr@, 09.06.2022 8:18:50  62907
// Проверка на отсутствующие комплекты
Таблица = ПолныеПрава.ПолучитьВыборкуПоКритериюОтбора("СвязанныеДокументы", Ссылка);  
ОтсутствующиеКомплекты = новый Массив();
Для Каждого СтрокаТаблицы из Таблица Цикл
	Если ТипЗнч(СтрокаТаблицы.Ссылка) = Тип("ДокументСсылка.ЗаказНаКомплектацию") Тогда
			ДокументЗаказНаКомплектацию = СтрокаТаблицы.Ссылка;
			Если НЕ ДокументЗаказНаКомплектацию.ПометкаУдаления Тогда
					Отбор = Новый Структура();
					Отбор.Вставить("Номенклатура", ДокументЗаказНаКомплектацию.Номенклатура);
					НайденноеЗначение = ЭтотОбъект.Товары.НайтиСтроки(Отбор);  
					Если НайденноеЗначение.Количество() = 0 Тогда
							ОтсутствующиеКомплекты.Добавить(Новый Структура("Документ, Номенклатура",ДокументЗаказНаКомплектацию,ДокументЗаказНаКомплектацию.Номенклатура));
					КонецЕсли; 
			КонецЕсли; 
	КонецЕсли; 
КонецЦикла;
Если ОтсутствующиеКомплекты.Количество() > 0 Тогда
	ОчиститьСообщения();
	Для Каждого Строка из ОтсутствующиеКомплекты Цикл
			Сообщить("Имеется подчиненный "+Строка.Документ+" с отсутствующим в Заказе покупателя комплектом "+
			""""+Строка.Номенклатура.Артикул+" "+Строка.Номенклатура+"""");
	КонецЦикла;
	ЭлементыФормы.ОтданНаСборку.Значение = Ложь;
	Возврат;
КонецЕсли; 

// Проверка заполненного поля Размещение
НеЗаполненоПолеРазмещение = новый Массив();
Для Каждого СтрокаТаб из Этотобъект.Товары Цикл
	Если Не ЗначениеЗаполнено(СтрокаТаб.Размещение) Тогда
			НеЗаполненоПолеРазмещение.Добавить(Новый Структура("НомерСтроки",СтрокаТаб.НомерСтроки));
	КонецЕсли;
КонецЦикла;
Если НеЗаполненоПолеРазмещение.Количество() > 0 Тогда
	ОчиститьСообщения();
	Для Каждого Строка из НеЗаполненоПолеРазмещение Цикл
			Сообщить("В строке "+Строка.НомерСтроки+" не заполнено поле Размещение.");
	КонецЦикла;
	ЭлементыФормы.ОтданНаСборку.Значение = Ложь;
	Возврат;
КонецЕсли; 
//+1Ctr@, 09.06.2022 8:18:50
